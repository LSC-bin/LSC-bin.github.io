## 확장 기능 우선순위 및 설계 가이드

### 1. 카테고리 정의
- **분석(Analytics)**: 참여도, 정답률, 활동 지표 시각화.
- **콘텐츠(Content Management)**: 자료/콘텐츠 버전 관리, 템플릿, 검색/태깅.
- **협업(Collaboration)**: 학생-학생/교사 피드백, 공동 작업, 실시간 편집.
- **알림(Notification & Communication)**: 푸시, 메일, 인앱 알림, 공지 브로드캐스트.

### 2. 단계별 우선순위 (현황)
| 단계 | 핵심 목표 | 기능 | 진행 상태 |
| --- | --- | --- | --- |
| Phase 1 (MVP+) | 수업 운영 기본 확보 | 인앱 알림(토스트), 참여도 카드, 자료 태그/검색 | 알림 토스트만 부분 구현, 나머지 예정 |
| Phase 2 | 데이터 기반 피드백 | 상세 분석 대시보드, 과제/질문 통계, 개인별 리포트 | 예정 |
| Phase 3 | 고급 협업 | 실시간 공동 문서, 피드백 워크플로우, AI 요약/추천 | 예정 |

### 3. 기능 설계 요약

#### 3.1 분석
- 현재: React UI에 기본 참여 지표/그래프 미구현.
- 예정 기능:
  - **클래스 대시보드**: 세션별 참여율, 질문 수, 채팅 메시지 수, 평균 퀴즈 점수.
  - **학생 리포트**: 개인별 참여 그래프, 제출 현황, 성장 지표.
  - **세션 요약**: 활동 하이라이트, WordCloud, AI 요약 코멘트.
  - **기술**: Firestore Aggregation + Cloud Functions (배치) + Chart.js/Recharts 시각화.

#### 3.2 콘텐츠 관리
- 현재: 자료 업로드/태그 UI 미구현.
- 예정 기능:
  - 자료 라이브러리: 태그, 즐겨찾기, 버전 이력.
  - 수업 템플릿: 기능 구성 + 자료 + 활동을 패키지로 저장/복제.
  - 외부 연동: Google Drive, OneDrive, YouTube 임베드.
  - 권한: 교사/보조 교사 편집, 학생 읽기 전용, 개인 자료 업로드 옵션.

#### 3.3 협업
- 현재: 게시물/질문/채팅 읽기 UI만 존재, 댓글/피드백 등 미구현.
- 예정 기능:
  - 활동 코멘트 스레드, @mention, 실시간 커서 (향후).
  - 과제 피드백 워크플로우: 루브릭, 상태(제출/채점/반려).
  - 그룹 프로젝트: 소그룹 방, 역할 배정, 제출물 공유.
  - AI 보조: 주제 추천, 질문 개선, 피드백 초안 생성.

#### 3.4 알림
- 현재: 페이지 내 토스트/링크 복사 안내 등 최소한의 인앱 피드백만 제공.
- 예정 기능:
  - 알림 채널: 인앱, 이메일, 푸시 (Firebase Cloud Messaging).
  - 구독 설정: 사용자/클래스별 알림 선호도.
  - 트리거: 새 수업, 과제 마감, 질문 답변, 공지, AI 피드백 완료.
  - 알림 대기열: Cloud Tasks/Functions로 지연 전송 및 재시도 관리.

### 4. 데이터 모델 확장 포인트
- `analytics/{classId}/{sessionId}`: 일별/세션별 집계 문서.
- `notifications/{userId}/{notificationId}`: 사용자별 알림 큐.
- `resources/{resourceId}`: 자료 메타 + 버전 히스토리 (`versions` 서브컬렉션).
- `projects/{projectId}`: 그룹 협업 데이터, `members`, `artifacts`, `comments`.

### 5. UX 고려 사항
- 현재: 기본 페이지 레이아웃과 EmptyState/Skeleton만 구현.
- 예정 UX 개선:
  - 대시보드 위젯 커스터마이징 (교사가 원하는 지표 선택).
  - 알림 센터: 읽음 처리, 필터(수업/자료/과제).
  - 협업 댓글 UI: 타임스탬프, 첨부, 승인/해결 상태.
  - 자료 라이브러리: 썸네일, 파일 타입 아이콘, 미리보기.

### 6. 지표 정의 (예시)
- 참여율: `활동 참여 학생 수 / 전체 학생 수`.
- 질문 응답률: `답변 완료 질문 수 / 전체 질문 수`.
- 과제 제출률: `제출 완료 / 배정된 학생 수`.
- 평균 응답 시간: 교사 피드백 제공까지 걸린 시간.

### 7. 기술적 고려
- Aggregation: Cloud Functions (scheduled)로 `analytics` 컬렉션 업데이트.
- 검색/필터: Algolia/ElasticSearch 연동 고려 (또는 Firestore full-text 인덱스).
- 협업 실시간성: Firestore + WebRTC(향후), CRDT 기반 편집 고려.
- 알림: Cloud Functions Trigger (Firestore write) → FCM/SendGrid 메일.

### 8. 로드맵 예시 (업데이트)
1. **1개월**
   - 현황: Firestore 읽기 기반 Teacher/Student 화면, 시드 스크립트, 문서 정비 완료.
   - 다음: 인앱 알림(알림 센터), 기본 자료 태그/검색, 참여도 카드.
2. **2~3개월**
   - 학생 리포트, 과제 통계, 알림 구독 설정, 템플릿 관리.
3. **4~6개월**
   - AI 요약, 그룹 프로젝트, 실시간 협업 기능, 고급 분석.

이 로드맵을 바탕으로 스프린트 계획을 세우고, 각 기능을 SPA 구조와 Firestore 스키마에 맞춰 순차적으로 구현하면 확장 목표를 효율적으로 달성할 수 있습니다.

